import{_ as N}from"./CzMUlrHv.js";import{e as j,g as S,f as V,c as o,a as e,i as k,s as q,v as B,j as l,x as C,t as n,k as M,F as p,r as v,m as f,o as s,b as m,w as x,d as y,l as T}from"./BpSb0wkX.js";import{_ as L}from"./DlAUqK2U.js";const D={class:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans text-gray-800 dark:text-gray-200"},E={class:"container mx-auto px-4 py-6 max-w-3xl"},z={class:"mb-8"},F={class:"relative"},R={key:0,class:"mb-6"},$={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},I={key:1,class:"text-center py-12"},G={key:2,class:"space-y-4"},Q={class:"p-4"},U={class:"flex justify-center text-base md:text-lg font-semibold text-gray-800 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2"},Y={class:"flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-3"},A={class:"flex items-center gap-1"},H={class:"flex items-center gap-1"},J={class:"flex flex-wrap gap-1 ml-auto"},K={class:"text-gray-700 dark:text-gray-300 text-sm line-clamp-2 leading-tight mb-3 flex justify-center"},O={key:3,class:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},P={key:4,class:"text-center py-12"},W={class:"bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 mt-8"},X={class:"container mx-auto px-4 py-4 max-w-3xl text-center text-gray-500 dark:text-gray-400 text-xs"},Z=j({__name:"search",setup(ee){const d=f(""),i=f([]),c=f(!1);let b=null;const _=()=>{b&&clearTimeout(b),b=setTimeout(()=>{h()},300)},h=async()=>{if(!d.value.trim()){i.value=[];return}c.value=!0;try{const r=await $fetch("/api/search",{method:"GET",query:{q:d.value.trim()}});i.value=r.data||[]}catch(r){console.error("搜索失败:",r),i.value=[]}finally{c.value=!1}},w=()=>{const r=document.documentElement;r.classList.toggle("dark"),localStorage.theme=r.classList.contains("dark")?"dark":"light"};return S(()=>{(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark");const r=V();r.query.q&&(d.value=r.query.q,h())}),(r,t)=>{const u=N;return s(),o("div",D,[e("header",{class:"sticky top-0 z-50 bg-white/95 dark:bg-gray-900/95 shadow-sm border-b border-gray-100 dark:border-gray-800"},[e("div",{class:"container mx-auto px-4 py-2.5 max-w-3xl flex justify-between items-center"},[t[2]||(t[2]=e("a",{href:"/",class:"text-lg font-bold text-blue-600 dark:text-blue-400"},"Nuxt 技术博客",-1)),e("nav",{class:"flex items-center gap-4"},[t[1]||(t[1]=k('<ul class="flex gap-4 text-sm" data-v-ba38aedf><li data-v-ba38aedf><a href="/" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-v-ba38aedf>首页</a></li><li data-v-ba38aedf><a href="/tags" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-v-ba38aedf>标签</a></li><li data-v-ba38aedf><a href="/categories" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-v-ba38aedf>分类</a></li><li data-v-ba38aedf><a href="/archives" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-v-ba38aedf>归档</a></li></ul>',1)),e("button",{onClick:w,class:"p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"切换暗黑模式"})])])]),e("main",E,[e("div",z,[e("div",F,[q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>C(d)?d.value=a:null),onInput:_,type:"text",placeholder:"搜索文章标题、内容或标签...",class:"w-full px-4 py-3 pl-12 text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[B,l(d)]]),t[3]||(t[3]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),l(d)&&!l(c)?(s(),o("div",R,[e("h2",$," 搜索结果 ("+n(l(i).length)+") ",1)])):M("",!0),l(c)?(s(),o("div",I,[...t[4]||(t[4]=[e("div",{class:"inline-block w-10 h-10 border-3 border-blue-100 dark:border-blue-900 border-t-blue-500 dark:border-t-blue-400 rounded-full animate-spin mb-3"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"搜索中...",-1)])])):l(i).length>0?(s(),o("div",G,[(s(!0),o(p,null,v(l(i),a=>(s(),o("article",{key:a.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},[e("div",Q,[m(u,{to:a.path,class:"block"},{default:x(()=>[e("h2",U,n(a.frontmatter?.title||a.id),1)]),_:2},1032,["to"]),e("div",Y,[e("span",A,n(a.frontmatter?.date||"未发布"),1),t[5]||(t[5]=e("span",{class:"text-gray-300 dark:text-gray-600"},"•",-1)),e("span",H,[m(u,{to:`/categories/${a.frontmatter?.category||"未分类"}`,class:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors"},{default:x(()=>[y(n(a.frontmatter?.category||"未分类"),1)]),_:2},1032,["to"])]),e("div",J,[(s(!0),o(p,null,v(a.frontmatter?.tags||[],g=>(s(),T(u,{key:g,to:`/tags/${g}`,class:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-1.5 py-0.5 rounded text-xs hover:bg-blue-100 dark:hover:bg-blue-800/30 transition-colors"},{default:x(()=>[y(n(g),1)]),_:2},1032,["to"]))),128))])]),e("p",K,n(a.frontmatter?.description||"暂无简介，点击阅读全文了解更多内容..."),1),m(u,{to:a.path,class:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 text-xs font-medium hover:text-blue-700 dark:hover:text-blue-300 transition-colors justify-end"},{default:x(()=>[...t[6]||(t[6]=[y(" 阅读更多 ",-1)])]),_:1},8,["to"])])]))),128))])):l(d)&&!l(c)?(s(),o("div",O,[...t[7]||(t[7]=[e("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"没有找到相关文章，请尝试其他关键词",-1)])])):(s(),o("div",P,[...t[8]||(t[8]=[k('<div class="w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4" data-v-ba38aedf><svg class="w-8 h-8 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-ba38aedf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-ba38aedf></path></svg></div><h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-2" data-v-ba38aedf>搜索文章</h3><p class="text-gray-500 dark:text-gray-400 text-sm" data-v-ba38aedf>输入关键词开始搜索</p>',3)])]))]),e("footer",W,[e("div",X,[e("p",null,"© "+n(new Date().getFullYear())+" 我的 Nuxt4 技术博客 | 基于 Nuxt4 + Vue3 构建",1)])])])}}}),se=L(Z,[["__scopeId","data-v-ba38aedf"]]);export{se as default};
